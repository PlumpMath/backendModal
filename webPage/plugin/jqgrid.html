<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>jqgrid</title>
    <!--animate-->
    <link rel="stylesheet" href="../../css/common/animate.css">
    <!--common style-->
    <link rel="stylesheet" href="../../css/common/style.css">
    <!--bootstrap样式-->
    <link rel="stylesheet" href="../../plugin/bootstrap/css/bootstrap.min.css">
    <!--font-awesome-->
    <link rel="stylesheet" href="../../plugin/fontAwesome/css/font-awesome.min.css">
    <!--jquery ui-->
    <link rel="stylesheet" type="text/css" media="screen" href="../../plugin/jqueryUi/css/jquery-ui-1.10.4.custom.min.css" />
    <!--jqgrid-->
    <link rel="stylesheet" media="screen" href="../../plugin/jqgrid/css/ui.jqgrid.css">
    <!--jQuery-->
    <!--3.1的版本不支持contab-->
    <script src="../../js/jquery/jquery-3.1.1.js"></script>
    <!--layer-->
    <script src="../../plugin/layer/layer.js"></script>
    <!--bootstrap js-->
    <script src="../../plugin/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../js/jquery/jquery-2.0.2.min.js"></script>
</head>
<body>
<div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox ">
                <div class="ibox-title">
                    <h5>jQuery Grid Plugin – jqGrid</h5>
                </div>
                <div class="ibox-content">
                    <p>
                        <strong>jqGrid</strong> 是一个用来显示网格数据的jQuery插件，文档比较全面，附带中文版本。访问<a target="_blank" href="http://www.trirand.com/blog/"> 官网</a>
                    </p>
                    <p>jqGrid的主要特点为：</p>
                    <ol>
                        <li>基于jquery UI主题，开发者可以根据客户要求更换不同的主题</li>
                        <li>兼容目前所有流行的web浏览器</li>
                        <li>Ajax分页，可以控制每页显示的记录数</li>
                        <li>支持XML，JSON，数组形式的数据源</li>
                        <li>提供丰富的选项配置及方法事件接口</li>
                        <li>支持表格排序，支持拖动列、隐藏列</li>
                        <li>支持滚动加载数据</li>
                        <li>支持实时编辑保存数据内容</li>
                        <li>支持子表格及树形表格</li>
                        <li>支持多语言</li>
                        <li>免费</li>
                    </ol>
                    <hr>
                    <h4>基本示例</h4>

                    <div class="jqGrid_wrapper">
                        <table id="table_list_1"></table>
                        <div id="pager_list_1"></div>
                    </div>
                    <p>&nbsp;</p>
                    <h4 class="m-t">高级用法</h4>
                    <div class="jqGrid_wrapper">
                        <div class="row" style="margin-bottom: 5px;">
                            <div class="pull-left"  style="margin-left: 20px;">
                                <input type="text" placeholder="请输入关键字查询......">
                                <button class="btn btn-info btn-xs"><i class="fa fa-search"></i>搜索</button>
                            </div>
                            <div class="pull-right" style="margin-right: 20px;">
                                <button id="add" class="btn btn-xs btn-success">新增</button>
                                <button id="change" class="btn btn-xs btn-warning">修改</button>
                                <button id="delete" class="btn btn-xs btn-danger">删除</button>
                            </div>
                        </div>
                        <table id="table_list_2"></table>
                        <div id="pager_list_2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- jqGrid -->
<script src="../../plugin/jqgrid/js/grid.locale-cn.js"></script>
<script src="../../plugin/jqgrid/js/jquery.jqGrid.min.js"></script>
<!-- Page-Level Scripts -->
<script>
    $(document).ready(function () {

        $.jgrid.defaults.styleUI = 'Bootstrap';
        // Examle data for jqGrid
        var mydata = [
            {id: "1", invdate: "2010-05-24", name: "test", note: "note", tax: "10.00", total: "2111.00"},
            {id: "2", invdate: "2010-05-25", name: "test2", note: "note2", tax: "20.00", total: "320.00"},
            {id: "3", invdate: "2007-09-01", name: "test3", note: "note3", tax: "30.00", total: "430.00"},
            {id: "4", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00"},
            {id: "5", invdate: "2007-10-05", name: "test2", note: "note2", tax: "20.00", total: "320.00"},
            {id: "6", invdate: "2007-09-06", name: "test3", note: "note3", tax: "30.00", total: "430.00"},
            {id: "7", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00"},
            {id: "8", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "21.00", total: "320.00"},
            {id: "9", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00"},
            {id: "11", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00"}
        ];

        // Configuration for jqGrid Example 1
        $("#table_list_1").jqGrid({
            data: mydata,
            datatype: "local",
            height: 250,
            autowidth: true,
            shrinkToFit: false,
            rowNum: 14,
            rowList: [10, 20, 30],
            colNames: ['序号', '日期', '客户', '金额', '运费', '总额', '备注'],
            colModel: [
                {name: 'id', index: 'id', width: 60, sorttype: "int"},
                {name: 'invdate', index: 'invdate', width: 90, sorttype: "date", formatter: "date"},
                {name: 'name', index: 'name', width: 100},
                {name: 'amount', index: 'amount', width: 80, align: "right", sorttype: "float", formatter: "number"},
                {name: 'tax', index: 'tax', width: 80, align: "right", sorttype: "float"},
                {name: 'total', index: 'total', width: 80, align: "right", sorttype: "float"},
                {name: 'note', index: 'note', width: 150, sortable: false}],
            pager: "#pager_list_1",
            viewrecords: true,
            caption: "jqGrid 示例1",
            hidegrid: false
        });

        // Configuration for jqGrid Example 2
        $("#table_list_2").jqGrid({
            data: mydata,
            datatype: "local",
            height: 450,
            autowidth: true,
            shrinkToFit: false,
            rowNum: 20,
            rowList: [10, 20, 30],
            colNames: ['序号', '日期', '客户', '金额', '运费', '总额', '备注'],
            colModel: [
                {name: 'id', index: 'id', editable: true, width: 60, sorttype: "int", search: true},
                {name: 'invdate', index: 'invdate', editable: true, width: 90, sorttype: "date", formatter: "date"},
                {name: 'name', index: 'name', editable: true, width: 100},
                {name: 'amount', index: 'amount', editable: true, width: 80, sorttype: "float", formatter: "number"},
                {name: 'tax', index: 'tax', editable: true, width: 80, align: "right", sorttype: "float"},
                {name: 'total', index: 'total', editable: true, width: 80, align: "right", sorttype: "float"},
                {name: 'note', index: 'note', editable: true, width: 100, sortable: false}
            ],
            pager: "#pager_list_2",
            viewrecords: true,
            caption: "jqGrid 示例2",
            add: true,
            edit: true,
            addtext: 'Add',
            edittext: 'Edit',
            hidegrid: false
        });

        // Add selection
        $("#table_list_2").setSelection(4, true);


        // Setup buttons
        $("#table_list_2").jqGrid('navGrid', '#pager_list_2', {
            edit: true,
            add: true,
            del: true,
            search: true
        }, {
            height: 200,
            reloadAfterSubmit: true
        });
        // Add responsive to jqGrid
        $(window).bind('resize', function () {
            var width = $('.jqGrid_wrapper').width();
            $('#table_list_1').setGridWidth(width);
            $('#table_list_2').setGridWidth(width);
        });
//        增删改操作设置统一变量
        var table_list = $("#table_list_2");
//        新增
        $("#add").click(function(){
            layer.open({
                type: 2,
                title: 'layer mobile页',
                shadeClose: true,
                shade: 0.8,
                area: ['35%', '50%'],
                content: '../operation/add.html', //iframe的url
                btn: ['确定', '关闭'],
                yes:function(){
                    var iframe1 = window.frames[0];
                    iframe1.document.getElementById("submitBtn").click();
//                    var iframeWin = document.getElementsByTagName("iframe");
//                    var iframeWin = $("iframe");
//                    var submitBtn = iframeWin.find("#submitBtn");
//                    alert(submitBtn.text());
//                    submitBtn.click();
                  /*  var submitBtn = $(this).contents().find("#submitBtn");
                    alert(submitBtn);*/
//                     form = $("#addForm");
//                    alert(btn);
//                    form.submit();
//                    $.ajax({
//                        url:url,
//                        date:date,
//                        async:false,
//                        success:function(){
//
//                        }
//                    })
                },
                cancel:function(){
                    layer.closeAll();
                }
            });
        });
//        修改
        $("#change").click(function(){
            var selectId = table_list.jqGrid("getGridParam","selrow");
//            alert(selectId);
//            var table_list = $("#table_list_2");
//            var selectId = table_list.jqGrid("getGridParam","selrow");
            if(selectId != "" && selectId != null) {
                alert("弹出修改页面");
            }else{
                layer.alert('请选中一条数据！', {
                    icon: 3,
                    skin: 'layer-ext-moon'
                })
            }
        });
//        删除
        $("#delete").click(function(){
            var selectId = table_list.jqGrid("getGridParam","selrow");
//            alert(selectId);
            if(selectId != "" && selectId != null) {
                layer.confirm('确认删除？', {
                    btn: ['确认','取消'] //按钮
                }, function(){
                    layer.msg('删除成功', {icon: 1});
                }, function(){});
            }else{
                layer.alert('请选中一条数据！', {
                    icon: 3,
                    skin: 'layer-ext-moon'
                })
            }
        });
    });
</script>
</body>
</html>